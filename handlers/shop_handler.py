from aiogram import Router, types
from aiogram.types import Message
from utils.keyboard import (
    get_main_keyboard,
    get_shop_keyboard,
    get_question_packages_keyboard,
    get_subscription_packages_keyboard
)

router = Router()

@router.message(lambda msg: msg.text == "üõç –ú–∞–≥–∞–∑–∏–Ω")
async def shop_handler(message: Message):
    await message.answer(
        "üõç <b>–ú–∞–≥–∞–∑–∏–Ω</b>\n\n"
        "–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏:\n"
        "‚Ä¢ üí¨ –ü–∞–∫–µ—Ç—ã –≤–æ–ø—Ä–æ—Å–æ–≤ (–Ω–∞—á–∏—Å–ª—è—é—Ç XP)\n"
        "‚Ä¢ üí≥ –ü–æ–¥–ø–∏—Å–∫–∏ –õ–∞–π—Ç –∏ –ü—Ä–æ (–±–µ–∑–ª–∏–º–∏—Ç, –¥–æ–ø. —Ñ—É–Ω–∫—Ü–∏–∏)\n\n"
        "üîî –ü—Ä–æ-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ YouTube-–≤–∏–¥–µ–æ, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.\n"
        "‚ùó –ü—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ XP –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è\n\n"
        "–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ ‚§µÔ∏è",
        parse_mode="HTML",
        reply_markup=get_shop_keyboard()
    )

@router.message(lambda message: message.text == "üí¨ –í–æ–ø—Ä–æ—Å—ã")
async def handle_buy_questions(message: Message):
    print("[DEBUG] üí¨ –í–æ–ø—Ä–æ—Å—ã –Ω–∞–∂–∞—Ç–∞")
    await message.answer(
        "üí¨ <b>–ü–æ–∫—É–ø–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤</b>\n\n"
        "–ï—Å–ª–∏ —É —Ç–µ–±—è –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø—Ä–æ—Å—Ç–æ –∫—É–ø–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –æ–±—É—á–µ–Ω–∏–µ!\n\n"
        "üìå –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:\n"
        "‚Ä¢ –ü–æ–ª—É—á–∞–π –æ—Ç–≤–µ—Ç—ã –æ—Ç –ò–ò –ø–æ —É—á–µ–±–Ω—ã–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º\n"
        "‚Ä¢ XP –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª—è—Ç—å—Å—è –∑–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å\n"
        "‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å—Å—è, –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∏—Å—Å–∏–∏, –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è\n\n"
        "–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π –ø–∞–∫–µ—Ç –Ω–∏–∂–µ üëá",
        parse_mode="HTML",
        reply_markup=get_question_packages_keyboard()
    )

@router.message(lambda message: message.text == "üí≥ –ü–æ–¥–ø–∏—Å–∫–∞")
async def handle_buy_subscription(message: Message):
    print("[DEBUG] üí¨ –í–æ–ø—Ä–æ—Å—ã –Ω–∞–∂–∞—Ç–∞")
    await message.answer(
        "üí≥ <b>–ü–æ–¥–ø–∏—Å–∫–∞</b>\n\n"
        "–ü–æ–¥–ø–∏—Å–∫–∞ —Å–Ω–∏–º–∞–µ—Ç –≤—Å–µ –ª–∏–º–∏—Ç—ã –∏ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º!\n\n"
        "üéÅ –ß—Ç–æ –¥–∞—ë—Ç –ø–æ–¥–ø–∏—Å–∫–∞:\n"
        "‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã (–Ω–µ —Ç—Ä–∞—Ç—è—Ç—Å—è, XP –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è)\n"
        "‚Ä¢ üöÄ –ü—Ä–æ: +100 –≤–æ–ø—Ä–æ—Å–æ–≤, –≤–∏–¥–µ–æ, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç\n"
        "‚Ä¢ üí° –õ–∞–π—Ç: –ø—Ä–æ—Å—Ç–æ –±–µ–∑–ª–∏–º–∏—Ç –Ω–∞ –Ω–µ–¥–µ–ª—é\n\n"
        "–í—ã–±–∏—Ä–∞–π –Ω—É–∂–Ω—ã–π —Ç–∞—Ä–∏—Ñ –Ω–∏–∂–µ üëá",
        parse_mode="HTML",
        reply_markup=get_subscription_packages_keyboard()
    )

@router.message(lambda message: message.text == "‚¨ÖÔ∏è –ù–∞–∑–∞–¥")
async def back_to_main(message: Message):
    await message.answer("‚Ü©Ô∏è –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=get_main_keyboard())